import { NextRequest, NextResponse } from 'next/server';
import { z } from 'zod';

// Validation schema for chat request
const chatRequestSchema = z.object({
  message: z.string().min(1, 'Message is required'),
  conversationId: z.string().optional(),
});

// Demo responses based on common benefits questions
const getDemoResponse = (message: string): string => {
  const lowerMessage = message.toLowerCase();
  
  // Ignore suggestion text and very short messages
  if (lowerMessage.includes('get answers') || lowerMessage.includes('learn about') || lowerMessage.includes('view your') || lowerMessage.length < 10) {
    return `Hi there! I'm your AmeriVet Benefits AI Assistant. I can help you with:

üéØ **Plan Comparison** - Compare health, dental, and vision plans
üí∞ **Cost Calculator** - Calculate total annual costs and savings  
üìä **Benefits Dashboard** - View your current enrollment and usage
üè• **HSA/FSA Info** - Learn about tax-advantaged accounts
üìö **Document Analysis** - Upload and analyze your benefits documents
‚ùì **General Questions** - Get answers about coverage, claims, and more

This is a demo version, so I'm showing you the interface and capabilities. In production, I'd have access to your actual AmeriVet benefits data and provide personalized, real-time assistance.

What would you like to explore first?`;
  }
  
  // Check for specific questions first (more specific patterns)
  if (lowerMessage.includes('hsa') || lowerMessage.includes('health savings account')) {
    return `Ah, HSAs! One of my favorite topics - these accounts are absolute game-changers for healthcare savings. Let me walk you through why they're so powerful:

**2024 HSA Contribution Limits:**
‚Ä¢ Individual: $4,300
‚Ä¢ Family: $8,550  
‚Ä¢ Catch-up (55+): Additional $1,000

**Why HSAs are so powerful:**
‚Ä¢ Pre-tax contributions reduce your taxable income
‚Ä¢ Tax-free growth on investments
‚Ä¢ Tax-free withdrawals for qualified medical expenses
‚Ä¢ It's the only account with this "triple tax advantage"

**To qualify for an HSA, you need:**
‚Ä¢ A High Deductible Health Plan (HDHP)
‚Ä¢ No other health coverage
‚Ä¢ Minimum deductible: $1,600 (individual) / $3,200 (family)
‚Ä¢ Maximum out-of-pocket: $8,050 (individual) / $16,100 (family)

**Investment potential:**
Once you reach a minimum balance, many HSAs let you invest in mutual funds, ETFs, and other securities. After age 65, you can use funds for non-medical expenses (though you'll pay income tax on those withdrawals).

Would you like me to help you calculate your optimal HSA contribution or compare HDHP options?`;
  }
  
  if (lowerMessage.includes('dashboard') || lowerMessage.includes('my benefits') || lowerMessage.includes('show me my')) {
    return `Perfect! Let me pull up your personalized benefits dashboard. Here's what I'm seeing:

üìä **Current Enrollment:**
‚Ä¢ Health Insurance: Blue Cross Blue Shield PPO
‚Ä¢ Dental: Delta Dental Premier  
‚Ä¢ Vision: VSP Standard
‚Ä¢ Life Insurance: $50,000 coverage
‚Ä¢ Disability: Short-term and long-term

üí∞ **Financial Summary:**
‚Ä¢ Monthly Premiums: $487.50
‚Ä¢ YTD Healthcare Spending: $2,340
‚Ä¢ Remaining Deductible: $1,200
‚Ä¢ HSA Balance: $3,450
‚Ä¢ FSA Remaining: $890

üìÖ **Upcoming Deadlines:**
‚Ä¢ Open Enrollment: November 1-30, 2024
‚Ä¢ HSA Contribution Deadline: December 31, 2024
‚Ä¢ FSA Spending Deadline: March 15, 2025

üéØ **Quick Actions:**
‚Ä¢ View Detailed Benefits Summary
‚Ä¢ Update Dependents
‚Ä¢ Change Coverage Level
‚Ä¢ Submit Claims
‚Ä¢ Find In-Network Providers

üìà **Usage Analytics:**
‚Ä¢ Most Used Benefits: Prescription drugs, preventive care
‚Ä¢ Cost Trends: 15% increase from last year
‚Ä¢ Savings Opportunities: Consider HDHP + HSA

Is there a specific benefit you'd like to explore or update?`;
  }
  
  if (lowerMessage.includes('cost') || lowerMessage.includes('calculator') || lowerMessage.includes('calculate')) {
    return `Great question! The cost calculator is one of our most powerful tools. Most people only look at monthly premiums, but the real cost is much more complex. Let me show you:

**Here's what we factor in:**
‚Ä¢ Monthly Premiums: Your base monthly cost
‚Ä¢ Deductibles: What you pay before insurance kicks in
‚Ä¢ Copays & Coinsurance: Your share of covered services
‚Ä¢ Out-of-Pocket Maximums: Your maximum annual liability
‚Ä¢ HSA Contributions: Tax-advantaged savings potential

**Here's a quick example:**

Plan A (HMO): $400/month + $1,500 deductible = $6,300/year minimum
Plan B (PPO): $600/month + $3,000 deductible = $10,200/year minimum  
Plan C (HDHP): $200/month + $5,000 deductible = $7,400/year minimum

**Key factors to consider:**
‚Ä¢ Your expected healthcare usage (preventive, chronic conditions, emergencies)
‚Ä¢ Prescription drug needs
‚Ä¢ Preferred doctors and hospitals
‚Ä¢ Family size and ages
‚Ä¢ Employer HSA contributions

I can help you run different scenarios - low, medium, or high healthcare usage - and compare family vs. individual calculations. What's your situation like?`;
  }
  
  if (lowerMessage.includes('compare') || lowerMessage.includes('comparison') || lowerMessage.includes('plans')) {
    return `Excellent! Plan comparison is where most people get overwhelmed, but I'll make it simple. Let me break down the key differences:

**Plan Comparison Matrix:**

| Feature | HMO | PPO | HDHP | EPO |
|---------|-----|-----|------|-----|
| Monthly Premium | $400 | $600 | $200 | $500 |
| Deductible | $1,500 | $3,000 | $5,000 | $2,500 |
| Out-of-Pocket Max | $6,000 | $8,000 | $7,000 | $7,500 |
| Primary Care Visit | $20 copay | $30 copay | 100% until deductible | $25 copay |
| Specialist Visit | $50 copay | $50 copay | 100% until deductible | $50 copay |
| Emergency Room | $200 copay | $500 copay | 100% until deductible | $300 copay |
| Prescription Drugs | $10/$30/$50 | $15/$35/$55 | 100% until deductible | $12/$32/$52 |

**Key questions to ask yourself:**
‚Ä¢ Budget: Can you afford higher premiums for lower deductibles?
‚Ä¢ Health Status: Do you expect high medical usage?
‚Ä¢ Provider Network: Are your preferred doctors covered?
‚Ä¢ Flexibility: Do you need referrals or out-of-network options?

Based on your specific situation, I can help you determine which plan type makes the most sense. What's your typical healthcare usage like?`;
  }
  
  if (lowerMessage.includes('health insurance') || lowerMessage.includes('medical plan') || (lowerMessage.includes('coverage') && lowerMessage.length > 15)) {
    return `Health insurance can be confusing, but I'm here to make it clear! Here's what you need to know:

**Plan Types Available:**
‚Ä¢ HMO (Health Maintenance Organization) - Lower cost, network restrictions
‚Ä¢ PPO (Preferred Provider Organization) - More flexibility, higher cost
‚Ä¢ HDHP (High Deductible Health Plan) - Lower premiums, higher deductibles
‚Ä¢ EPO (Exclusive Provider Organization) - Network only, no referrals needed

**Key Considerations:**
‚Ä¢ Monthly premiums vs. out-of-pocket costs
‚Ä¢ Network coverage (doctors, hospitals, specialists)
‚Ä¢ Prescription drug coverage
‚Ä¢ Mental health and wellness benefits
‚Ä¢ Family coverage options

**Cost Calculator Features:**
‚Ä¢ Compare total annual costs across plans
‚Ä¢ Factor in expected healthcare usage
‚Ä¢ Consider HSA/FSA contributions
‚Ä¢ Account for employer contributions

Would you like me to help you compare specific plans or calculate costs?`;
  }
  
  // Check for specific advantage/benefit questions
  if (lowerMessage.includes('advantage') || lowerMessage.includes('why use') || lowerMessage.includes('how can you help') || lowerMessage.includes('what are the advantages')) {
    return `That's a great question! A benefits assistant like me can be incredibly valuable. Here's what makes me different:

üéØ **Personalized Guidance**: Get tailored recommendations based on your specific situation, family size, and health needs.

üìä **Plan Comparison**: Easily compare different insurance plans side-by-side with clear cost breakdowns and coverage details.

üí∞ **Cost Optimization**: Find the most cost-effective options while ensuring you have adequate coverage for your needs.

üìö **Educational Support**: Learn about complex benefits terminology and make informed decisions about your healthcare.

‚è∞ **Time Savings**: Get instant answers to benefits questions instead of waiting on hold or searching through lengthy documents.

üîç **Document Analysis**: Upload your benefits documents and get quick summaries and explanations of key terms.

This demo shows the interface - in production, it would connect to your actual benefits data and provide real-time, personalized assistance.`;
  }
  
  // Check for specific Kaiser Oregon Enhanced HMO questions
  if (lowerMessage.includes('oregon enhanced') || lowerMessage.includes('nw oregon enhanced') || lowerMessage.includes('enhanced hmo oregon') || lowerMessage.includes('oregon kaiser enhanced')) {
    return `Excellent choice! The Kaiser Permanente NW Oregon Enhanced HMO is a premium plan with comprehensive coverage. Here's what I can tell you about this specific plan:

**üè• Kaiser Permanente NW Oregon Enhanced HMO Analysis:**

**Plan Overview:**
‚Ä¢ **Coverage Area**: Oregon-specific network
‚Ä¢ **Plan Type**: Enhanced HMO (Health Maintenance Organization)
‚Ä¢ **Provider Network**: Kaiser Permanente Oregon facilities
‚Ä¢ **Coverage Period**: 2024-2025

**Enhanced Benefits (vs Standard):**
‚Ä¢ **Lower Copays** - Reduced out-of-pocket costs
‚Ä¢ **Expanded Coverage** - More services included
‚Ä¢ **Premium Network** - Access to top-tier providers
‚Ä¢ **Additional Services** - Wellness programs, preventive care

**Typical Enhanced HMO Features:**
‚Ä¢ **Primary Care**: $0-$20 copay
‚Ä¢ **Specialist Visits**: $20-$40 copay
‚Ä¢ **Emergency Room**: $150-$300 copay
‚Ä¢ **Prescription Drugs**: $10-$50 copay tiers
‚Ä¢ **Preventive Care**: 100% covered

**Kaiser Permanente Advantages:**
‚Ä¢ **Integrated Care** - All services under one roof
‚Ä¢ **Electronic Records** - Seamless care coordination
‚Ä¢ **Quality Focus** - Evidence-based medicine
‚Ä¢ **Member Portal** - Online access to health records

**Cost Considerations:**
‚Ä¢ **Higher Premiums** - More expensive than Standard
‚Ä¢ **Lower Out-of-Pocket** - Better coverage when you use services
‚Ä¢ **No Deductible** - Copay-based system
‚Ä¢ **Annual Maximum** - Protection against high costs

**Best For:**
‚Ä¢ Oregon residents who want comprehensive coverage
‚Ä¢ People who prefer Kaiser's integrated model
‚Ä¢ Those who want lower copays and better benefits
‚Ä¢ Families who value coordinated care

Would you like me to compare this with the Standard Oregon HMO or discuss the specific benefits in more detail?`;
  }

  // Check for specific Kaiser Washington Enhanced HMO questions
  if (lowerMessage.includes('washington enhanced') || lowerMessage.includes('kp wash enhanced') || lowerMessage.includes('enhanced hmo washington') || lowerMessage.includes('washington kaiser enhanced')) {
    return `Great question about the Kaiser Permanente Washington Enhanced HMO! This is a premium plan with excellent coverage. Here's the detailed breakdown:

**üè• Kaiser Permanente Washington Enhanced HMO Analysis:**

**Plan Highlights:**
‚Ä¢ **Coverage Area**: Washington state network
‚Ä¢ **Plan Type**: Enhanced HMO with premium benefits
‚Ä¢ **Provider Network**: Kaiser Permanente Washington facilities
‚Ä¢ **Coverage Period**: 2024-2025

**Enhanced vs Standard Benefits:**
‚Ä¢ **Lower Copays** - Reduced out-of-pocket costs for services
‚Ä¢ **Expanded Coverage** - More preventive and wellness services
‚Ä¢ **Premium Network** - Access to Kaiser's best providers
‚Ä¢ **Additional Benefits** - Enhanced mental health, maternity care

**Typical Coverage Structure:**
‚Ä¢ **Office Visits**: $0-$15 copay (vs $20-$30 Standard)
‚Ä¢ **Specialist Visits**: $15-$25 copay (vs $30-$50 Standard)
‚Ä¢ **Emergency Care**: $100-$200 copay
‚Ä¢ **Prescription Drugs**: $5-$25 copay tiers
‚Ä¢ **Preventive Services**: 100% covered

**Kaiser Washington Advantages:**
‚Ä¢ **Integrated System** - Seamless care coordination
‚Ä¢ **Quality Metrics** - High patient satisfaction scores
‚Ä¢ **Technology** - Advanced electronic health records
‚Ä¢ **Convenience** - Multiple locations across Washington

**Cost Analysis:**
‚Ä¢ **Monthly Premium**: Higher than Standard HMO
‚Ä¢ **Annual Savings**: Lower copays can save hundreds per year
‚Ä¢ **Value Proposition**: Better for frequent healthcare users
‚Ä¢ **Family Plans**: Enhanced benefits for dependents

**Network Coverage:**
‚Ä¢ **Primary Care**: Extensive network across Washington
‚Ä¢ **Specialists**: Full range of medical specialties
‚Ä¢ **Hospitals**: Kaiser hospitals and affiliated facilities
‚Ä¢ **Urgent Care**: Multiple urgent care centers

Would you like me to compare this with the Washington Standard HMO or discuss the specific cost differences?`;
  }

  // Check for specific Kaiser Washington Standard HMO questions
  if (lowerMessage.includes('washington standard') || lowerMessage.includes('kp wash standard') || lowerMessage.includes('standard hmo washington') || lowerMessage.includes('washington kaiser standard')) {
    return `Perfect! The Kaiser Permanente Washington Standard HMO is a solid, cost-effective option. Here's what you need to know:

**üè• Kaiser Permanente Washington Standard HMO Analysis:**

**Plan Overview:**
‚Ä¢ **Coverage Area**: Washington state network
‚Ä¢ **Plan Type**: Standard HMO with essential benefits
‚Ä¢ **Provider Network**: Kaiser Permanente Washington facilities
‚Ä¢ **Coverage Period**: 2024-2025

**Standard HMO Benefits:**
‚Ä¢ **Essential Coverage** - All required health benefits
‚Ä¢ **Preventive Care** - 100% covered annual checkups
‚Ä¢ **Emergency Care** - Coverage for urgent medical needs
‚Ä¢ **Prescription Drugs** - Tiered copay system

**Typical Coverage Structure:**
‚Ä¢ **Office Visits**: $20-$30 copay
‚Ä¢ **Specialist Visits**: $30-$50 copay
‚Ä¢ **Emergency Room**: $200-$400 copay
‚Ä¢ **Prescription Drugs**: $10-$50 copay tiers
‚Ä¢ **Preventive Services**: 100% covered

**Cost Advantages:**
‚Ä¢ **Lower Premiums** - More affordable monthly cost
‚Ä¢ **Predictable Costs** - Copay-based system
‚Ä¢ **No Deductible** - Pay copays only
‚Ä¢ **Annual Maximum** - Protection against high costs

**Kaiser Washington Network:**
‚Ä¢ **Primary Care**: Extensive network across Washington
‚Ä¢ **Specialists**: Full range of medical specialties
‚Ä¢ **Hospitals**: Kaiser hospitals and affiliated facilities
‚Ä¢ **Urgent Care**: Multiple urgent care centers

**Best For:**
‚Ä¢ Washington residents seeking quality care
‚Ä¢ People who want predictable healthcare costs
‚Ä¢ Those comfortable with Kaiser's integrated model
‚Ä¢ Budget-conscious individuals and families

**Coverage Highlights:**
‚Ä¢ **Mental Health**: Comprehensive behavioral health services
‚Ä¢ **Maternity Care**: Full pregnancy and delivery coverage
‚Ä¢ **Chronic Disease**: Management programs for diabetes, etc.
‚Ä¢ **Wellness Programs**: Health education and prevention

Would you like me to compare this with the Washington Enhanced HMO or discuss the specific benefits in more detail?`;
  }

  // Check for specific Kaiser Oregon Standard HMO questions
  if (lowerMessage.includes('oregon standard') || lowerMessage.includes('nw oregon standard') || lowerMessage.includes('standard hmo oregon') || lowerMessage.includes('oregon kaiser standard')) {
    return `Excellent choice! The Kaiser Permanente NW Oregon Standard HMO provides essential coverage at an affordable price. Here's the complete breakdown:

**üè• Kaiser Permanente NW Oregon Standard HMO Analysis:**

**Plan Overview:**
‚Ä¢ **Coverage Area**: Oregon-specific network
‚Ä¢ **Plan Type**: Standard HMO with essential benefits
‚Ä¢ **Provider Network**: Kaiser Permanente Oregon facilities
‚Ä¢ **Coverage Period**: 2024-2025

**Standard HMO Benefits:**
‚Ä¢ **Essential Coverage** - All required health benefits
‚Ä¢ **Preventive Care** - 100% covered annual checkups
‚Ä¢ **Emergency Care** - Coverage for urgent medical needs
‚Ä¢ **Prescription Drugs** - Tiered copay system

**Typical Coverage Structure:**
‚Ä¢ **Office Visits**: $20-$30 copay
‚Ä¢ **Specialist Visits**: $30-$50 copay
‚Ä¢ **Emergency Room**: $200-$400 copay
‚Ä¢ **Prescription Drugs**: $10-$50 copay tiers
‚Ä¢ **Preventive Services**: 100% covered

**Cost Advantages:**
‚Ä¢ **Lower Premiums** - More affordable monthly cost
‚Ä¢ **Predictable Costs** - Copay-based system
‚Ä¢ **No Deductible** - Pay copays only
‚Ä¢ **Annual Maximum** - Protection against high costs

**Kaiser Oregon Network:**
‚Ä¢ **Primary Care**: Extensive network across Oregon
‚Ä¢ **Specialists**: Full range of medical specialties
‚Ä¢ **Hospitals**: Kaiser hospitals and affiliated facilities
‚Ä¢ **Urgent Care**: Multiple urgent care centers

**Best For:**
‚Ä¢ Oregon residents seeking quality care
‚Ä¢ People who want predictable healthcare costs
‚Ä¢ Those comfortable with Kaiser's integrated model
‚Ä¢ Budget-conscious individuals and families

**Coverage Highlights:**
‚Ä¢ **Mental Health**: Comprehensive behavioral health services
‚Ä¢ **Maternity Care**: Full pregnancy and delivery coverage
‚Ä¢ **Chronic Disease**: Management programs for diabetes, etc.
‚Ä¢ **Wellness Programs**: Health education and prevention

Would you like me to compare this with the Oregon Enhanced HMO or discuss the specific benefits in more detail?`;
  }

  // Check for specific HSA Standard questions
  if (lowerMessage.includes('standard hsa') || lowerMessage.includes('hsa 3500') || lowerMessage.includes('standard hsa 3500') || lowerMessage.includes('hsa standard plan')) {
    return `Great question about the Standard HSA plan! This is a high-deductible health plan with excellent tax advantages. Here's the complete analysis:

**üí∞ Standard HSA Plan Analysis ($3,500 Deductible):**

**Plan Overview:**
‚Ä¢ **Plan Type**: High Deductible Health Plan (HDHP)
‚Ä¢ **Deductible**: $3,500 individual / $7,000 family
‚Ä¢ **HSA Eligibility**: Yes - can contribute to Health Savings Account
‚Ä¢ **Coverage Period**: 10/01/2024 - 12/31/2025

**HSA Tax Advantages:**
‚Ä¢ **Pre-Tax Contributions** - Reduce taxable income
‚Ä¢ **Tax-Free Growth** - Interest and investments grow tax-free
‚Ä¢ **Tax-Free Withdrawals** - For qualified medical expenses
‚Ä¢ **Triple Tax Advantage** - Only HSA offers this benefit

**Coverage Structure:**
‚Ä¢ **Preventive Care**: 100% covered (no deductible)
‚Ä¢ **Other Services**: Pay full cost until deductible met
‚Ä¢ **After Deductible**: Usually 80-90% coverage
‚Ä¢ **Out-of-Pocket Maximum**: $7,000 individual / $14,000 family

**HSA Contribution Limits (2024):**
‚Ä¢ **Individual**: $4,300 maximum
‚Ä¢ **Family**: $8,550 maximum
‚Ä¢ **Catch-up (55+)**: Additional $1,000
‚Ä¢ **Employer Contributions**: May contribute on your behalf

**Cost Analysis:**
‚Ä¢ **Lower Premiums** - Significantly less than PPO
‚Ä¢ **Higher Deductible** - Pay more out-of-pocket initially
‚Ä¢ **HSA Savings** - Tax benefits can offset costs
‚Ä¢ **Long-term Value** - HSA funds roll over year to year

**Best For:**
‚Ä¢ Young, healthy individuals
‚Ä¢ People who want to save for future healthcare
‚Ä¢ Those comfortable with higher deductibles
‚Ä¢ Tax-savvy individuals

**HSA Investment Options:**
‚Ä¢ **Cash Account** - FDIC insured, no risk
‚Ä¢ **Investment Options** - Mutual funds, ETFs
‚Ä¢ **Growth Potential** - Long-term wealth building
‚Ä¢ **Retirement Planning** - HSA becomes like 401k at 65

Would you like me to compare this with the Enhanced HSA plan or discuss HSA investment strategies?`;
  }

  // Check for specific HSA Enhanced questions
  if (lowerMessage.includes('enhanced hsa') || lowerMessage.includes('hsa 2000') || lowerMessage.includes('enhanced hsa 2000') || lowerMessage.includes('hsa enhanced plan')) {
    return `Excellent choice! The Enhanced HSA plan offers the best of both worlds - HSA tax advantages with a lower deductible. Here's the complete analysis:

**üí∞ Enhanced HSA Plan Analysis ($2,000 Deductible):**

**Plan Overview:**
‚Ä¢ **Plan Type**: High Deductible Health Plan (HDHP)
‚Ä¢ **Deductible**: $2,000 individual / $4,000 family
‚Ä¢ **HSA Eligibility**: Yes - can contribute to Health Savings Account
‚Ä¢ **Coverage Period**: 10/01/2024 - 12/31/2025

**Enhanced Benefits (vs Standard HSA):**
‚Ä¢ **Lower Deductible** - $1,500 less than Standard HSA
‚Ä¢ **Faster Coverage** - Reach coverage threshold sooner
‚Ä¢ **Better for Families** - Lower family deductible
‚Ä¢ **Same HSA Benefits** - All tax advantages maintained

**HSA Tax Advantages:**
‚Ä¢ **Pre-Tax Contributions** - Reduce taxable income
‚Ä¢ **Tax-Free Growth** - Interest and investments grow tax-free
‚Ä¢ **Tax-Free Withdrawals** - For qualified medical expenses
‚Ä¢ **Triple Tax Advantage** - Only HSA offers this benefit

**Coverage Structure:**
‚Ä¢ **Preventive Care**: 100% covered (no deductible)
‚Ä¢ **Other Services**: Pay full cost until deductible met
‚Ä¢ **After Deductible**: Usually 80-90% coverage
‚Ä¢ **Out-of-Pocket Maximum**: $6,000 individual / $12,000 family

**HSA Contribution Limits (2024):**
‚Ä¢ **Individual**: $4,300 maximum
‚Ä¢ **Family**: $8,550 maximum
‚Ä¢ **Catch-up (55+)**: Additional $1,000
‚Ä¢ **Employer Contributions**: May contribute on your behalf

**Cost Analysis:**
‚Ä¢ **Higher Premiums** - More than Standard HSA
‚Ä¢ **Lower Deductible** - Pay less out-of-pocket initially
‚Ä¢ **HSA Savings** - Tax benefits can offset costs
‚Ä¢ **Better Value** - For moderate healthcare users

**Best For:**
‚Ä¢ People who want HSA benefits with lower deductible
‚Ä¢ Families with moderate healthcare needs
‚Ä¢ Those who want faster coverage activation
‚Ä¢ Tax-savvy individuals who use healthcare regularly

**HSA Investment Options:**
‚Ä¢ **Cash Account** - FDIC insured, no risk
‚Ä¢ **Investment Options** - Mutual funds, ETFs
‚Ä¢ **Growth Potential** - Long-term wealth building
‚Ä¢ **Retirement Planning** - HSA becomes like 401k at 65

Would you like me to compare this with the Standard HSA plan or discuss HSA contribution strategies?`;
  }

  // Check for specific PPO questions
  if (lowerMessage.includes('ppo plan') || lowerMessage.includes('preferred provider') || lowerMessage.includes('ppo coverage') || lowerMessage.includes('ppo benefits')) {
    return `Great question about the PPO plan! This offers the most flexibility in provider choice. Here's the complete analysis:

**üè• PPO Plan Analysis (Preferred Provider Organization):**

**Plan Overview:**
‚Ä¢ **Plan Type**: Preferred Provider Organization
‚Ä¢ **Network Flexibility**: In-network and out-of-network coverage
‚Ä¢ **Referral Requirements**: None - direct access to specialists
‚Ä¢ **Coverage Period**: 10/01/2024 - 12/31/2025

**PPO Advantages:**
‚Ä¢ **Provider Choice** - See any doctor you want
‚Ä¢ **No Referrals** - Direct access to specialists
‚Ä¢ **Out-of-Network** - Coverage even outside network
‚Ä¢ **Flexibility** - Change providers anytime

**Coverage Structure:**
‚Ä¢ **In-Network**: Higher coverage (usually 80-90%)
‚Ä¢ **Out-of-Network**: Lower coverage (usually 60-70%)
‚Ä¢ **Deductible**: Usually $500-$1,500 individual
‚Ä¢ **Coinsurance**: Percentage you pay after deductible

**Cost Analysis:**
‚Ä¢ **Higher Premiums** - Most expensive option
‚Ä¢ **Lower Deductibles** - Coverage kicks in sooner
‚Ä¢ **Out-of-Network Costs** - Higher out-of-pocket
‚Ä¢ **Value** - Best for people who want choice

**Best For:**
‚Ä¢ People who want provider choice
‚Ä¢ Those with specific doctors they want to keep
‚Ä¢ People who travel frequently
‚Ä¢ Those who want direct specialist access

**Network Benefits:**
‚Ä¢ **In-Network**: Lower costs, better coverage
‚Ä¢ **Out-of-Network**: Higher costs, but still covered
‚Ä¢ **No Referrals** - See specialists directly
‚Ä¢ **Flexibility** - Change providers anytime

**Coverage Highlights:**
‚Ä¢ **Preventive Care**: 100% covered in-network
‚Ä¢ **Emergency Care**: Covered anywhere
‚Ä¢ **Prescription Drugs**: Tiered copay system
‚Ä¢ **Mental Health**: Comprehensive coverage

Would you like me to compare this with the HSA plans or discuss the specific cost differences?`;
  }

  // Check for specific Northern CA DHMO questions
  if (lowerMessage.includes('northern ca') || lowerMessage.includes('northern california') || lowerMessage.includes('dhmo 500') || lowerMessage.includes('dhmo 2k') || lowerMessage.includes('northern ca dhmo')) {
    return `Excellent question about the Northern California DHMO plans! You have two great options. Here's the complete analysis:

**üåç Northern California DHMO Plans Analysis:**

**Plan Options:**
‚Ä¢ **DHMO $500 Plan** - Lower deductible, higher premiums
‚Ä¢ **DHMO $2K Plan** - Higher deductible, lower premiums
‚Ä¢ **Coverage Area**: Northern California specific
‚Ä¢ **Plan Type**: Dental Health Maintenance Organization

**DHMO $500 Plan:**
‚Ä¢ **Deductible**: $500 individual / $1,000 family
‚Ä¢ **Copay**: $20 for most services
‚Ä¢ **Premiums**: Higher monthly cost
‚Ä¢ **Best For**: People who use dental services regularly

**DHMO $2K Plan:**
‚Ä¢ **Deductible**: $2,000 individual / $4,000 family
‚Ä¢ **Copay**: $20 for most services
‚Ä¢ **Premiums**: Lower monthly cost
‚Ä¢ **Best For**: People who want lower premiums

**DHMO Features:**
‚Ä¢ **Network Only** - Must use designated providers
‚Ä¢ **No Referrals** - Direct access to specialists
‚Ä¢ **Lower Costs** - Reduced premiums and copays
‚Ä¢ **Preventive Focus** - Emphasis on regular checkups

**Typical DHMO Benefits:**
‚Ä¢ **Cleanings & Exams**: Usually 100% covered
‚Ä¢ **Basic Procedures**: 80-90% coverage
‚Ä¢ **Major Procedures**: 50-70% coverage
‚Ä¢ **Annual Maximum**: $1,000-$2,000

**Northern CA Network:**
‚Ä¢ **Dentists**: Extensive network across Northern CA
‚Ä¢ **Specialists**: Orthodontists, oral surgeons, etc.
‚Ä¢ **Hospitals**: Dental surgery centers
‚Ä¢ **Convenience**: Multiple locations

**Cost Considerations:**
‚Ä¢ **Location**: Choose based on your residence
‚Ä¢ **Provider Network**: Ensure your dentist is covered
‚Ä¢ **Deductible Preference**: $500 vs $2,000 options
‚Ä¢ **Cost vs. Coverage**: Balance premiums with out-of-pocket

**Best For:**
‚Ä¢ Northern California residents
‚Ä¢ People who want predictable dental costs
‚Ä¢ Those comfortable with network restrictions
‚Ä¢ Budget-conscious individuals

Would you like me to compare the $500 vs $2K options or discuss the specific benefits in more detail?`;
  }

  // Check for specific Southern CA DHMO questions
  if (lowerMessage.includes('southern ca') || lowerMessage.includes('southern california') || lowerMessage.includes('socal') || lowerMessage.includes('southern ca dhmo')) {
    return `Great question about the Southern California DHMO plan! This is a solid option for SoCal residents. Here's the complete analysis:

**üåç Southern California DHMO Plan Analysis:**

**Plan Overview:**
‚Ä¢ **Coverage Area**: Southern California specific
‚Ä¢ **Plan Type**: Dental Health Maintenance Organization
‚Ä¢ **Deductible**: $2,000 individual / $4,000 family
‚Ä¢ **Copay**: $20 for most services

**DHMO Features:**
‚Ä¢ **Network Only** - Must use designated providers
‚Ä¢ **No Referrals** - Direct access to specialists
‚Ä¢ **Lower Costs** - Reduced premiums and copays
‚Ä¢ **Preventive Focus** - Emphasis on regular checkups

**Typical DHMO Benefits:**
‚Ä¢ **Cleanings & Exams**: Usually 100% covered
‚Ä¢ **Basic Procedures**: 80-90% coverage
‚Ä¢ **Major Procedures**: 50-70% coverage
‚Ä¢ **Annual Maximum**: $1,000-$2,000

**Southern CA Network:**
‚Ä¢ **Dentists**: Extensive network across Southern CA
‚Ä¢ **Specialists**: Orthodontists, oral surgeons, etc.
‚Ä¢ **Hospitals**: Dental surgery centers
‚Ä¢ **Convenience**: Multiple locations

**Cost Analysis:**
‚Ä¢ **Premiums**: Lower than PPO options
‚Ä¢ **Deductible**: $2,000 individual / $4,000 family
‚Ä¢ **Copays**: $20 for most services
‚Ä¢ **Annual Maximum**: Protection against high costs

**Best For:**
‚Ä¢ Southern California residents
‚Ä¢ People who want predictable dental costs
‚Ä¢ Those comfortable with network restrictions
‚Ä¢ Budget-conscious individuals

**Coverage Highlights:**
‚Ä¢ **Preventive Care**: 100% covered
‚Ä¢ **Basic Procedures**: 80-90% coverage
‚Ä¢ **Major Procedures**: 50-70% coverage
‚Ä¢ **Emergency Care**: Covered for urgent needs

**Network Benefits:**
‚Ä¢ **Quality Providers** - Vetted network dentists
‚Ä¢ **Convenient Locations** - Multiple offices
‚Ä¢ **Specialist Access** - Direct referral system
‚Ä¢ **Cost Savings** - Negotiated rates

Would you like me to compare this with the Northern CA options or discuss the specific benefits in more detail?`;
  }

  // Check for specific Vision questions
  if (lowerMessage.includes('vision benefits') || lowerMessage.includes('eye care') || lowerMessage.includes('vision coverage') || lowerMessage.includes('vision plan')) {
    return `Excellent question about vision coverage! I can see you have the AmeriVet Partners Management vision plan. Here's the complete analysis:

**üëÅÔ∏è Vision Benefits Analysis (AmeriVet Partners Management):**

**Plan Overview:**
‚Ä¢ **Provider**: AmeriVet Partners Management
‚Ä¢ **Coverage Type**: Vision insurance
‚Ä¢ **Network**: VSP or similar vision network
‚Ä¢ **Coverage Period**: 2024-2025

**Coverage Details:**
‚Ä¢ **Annual Eye Exams** - Usually 100% covered
‚Ä¢ **Frames Allowance** - Typically $150-$200 every 2 years
‚Ä¢ **Lens Coverage** - Basic lenses often 100% covered
‚Ä¢ **Contact Lenses** - Usually covered with allowance
‚Ä¢ **LASIK Discounts** - Often 15-20% off procedures

**Typical Vision Plan Features:**
‚Ä¢ **Network Providers** - VSP or similar network
‚Ä¢ **Out-of-Network** - Usually 80% coverage up to allowance
‚Ä¢ **Progressive Lenses** - Often covered with upgrade fees
‚Ä¢ **Tinted Lenses** - Usually covered for medical necessity
‚Ä¢ **Contact Lens Fitting** - Often covered annually

**Cost Considerations:**
‚Ä¢ **Annual Maximum** - Usually $200-$300 per person
‚Ä¢ **Co-pays** - $10-$25 for exams
‚Ä¢ **Upgrades** - Pay difference for premium frames/lenses
‚Ä¢ **Frequency** - New glasses every 1-2 years

**Smart Vision Strategy:**
‚Ä¢ Use annual benefits before they expire
‚Ä¢ Consider HSA funds for upgrades
‚Ä¢ Keep receipts for tax purposes
‚Ä¢ Check network providers for best coverage

**Coverage Highlights:**
‚Ä¢ **Preventive Care** - Annual eye exams
‚Ä¢ **Corrective Lenses** - Glasses and contacts
‚Ä¢ **Surgical Procedures** - LASIK discounts
‚Ä¢ **Emergency Care** - Urgent eye care coverage

**Network Benefits:**
‚Ä¢ **Quality Providers** - Vetted network optometrists
‚Ä¢ **Convenient Locations** - Multiple offices
‚Ä¢ **Specialist Access** - Ophthalmologists for complex care
‚Ä¢ **Cost Savings** - Negotiated rates

Would you like me to explain the contact lens coverage or discuss how to maximize your vision benefits?`;
  }

  // Check for specific Voluntary Benefits questions
  if (lowerMessage.includes('voluntary benefits') || lowerMessage.includes('unum') || lowerMessage.includes('disability') || lowerMessage.includes('worksite')) {
    return `Great question about voluntary benefits! I can see you have Unum voluntary benefit proposals. These are excellent additions to your core benefits:

**üíº Voluntary Benefits Analysis (Unum Proposals):**

**Short-Term Disability (STD):**
‚Ä¢ **Income Protection** - Typically 60-70% of salary
‚Ä¢ **Coverage Period** - Usually 3-6 months
‚Ä¢ **Waiting Period** - Often 7-14 days
‚Ä¢ **Pre-Existing Conditions** - May have limitations

**Worksite Voluntary Benefits:**
‚Ä¢ **Life Insurance** - Additional coverage beyond basic
‚Ä¢ **Accidental Death & Dismemberment** - AD&D coverage
‚Ä¢ **Critical Illness** - Lump sum for serious conditions
‚Ä¢ **Hospital Indemnity** - Daily cash benefits during hospitalization

**Key Advantages:**
‚Ä¢ **Portable Coverage** - Often continues if you leave
‚Ä¢ **Group Rates** - Lower than individual policies
‚Ä¢ **Guaranteed Issue** - No medical underwriting
‚Ä¢ **Payroll Deduction** - Convenient payment method

**Cost Considerations:**
‚Ä¢ **Employee-Paid** - You pay the premiums
‚Ä¢ **Group Discounts** - Lower than individual rates
‚Ä¢ **Tax Benefits** - Some may be pre-tax
‚Ä¢ **Coverage Levels** - Choose based on your needs

**Smart Voluntary Benefits Strategy:**
‚Ä¢ **Assess Your Needs** - Family situation, health status
‚Ä¢ **Compare Costs** - Group vs individual rates
‚Ä¢ **Consider Portability** - If you might change jobs
‚Ä¢ **Review Annually** - Adjust coverage as needed

**Coverage Highlights:**
‚Ä¢ **Income Protection** - STD coverage
‚Ä¢ **Life Insurance** - Additional coverage
‚Ä¢ **Critical Illness** - Lump sum benefits
‚Ä¢ **Hospital Indemnity** - Daily cash benefits

**Network Benefits:**
‚Ä¢ **Group Rates** - Lower than individual policies
‚Ä¢ **Guaranteed Issue** - No medical underwriting
‚Ä¢ **Portable Coverage** - Often continues if you leave
‚Ä¢ **Convenient Payment** - Payroll deduction

Would you like me to explain the disability coverage details or discuss which voluntary benefits might be right for you?`;
  }

  // Check for specific Open Enrollment questions
  if (lowerMessage.includes('open enrollment') || lowerMessage.includes('enrollment') || lowerMessage.includes('oe brochure') || lowerMessage.includes('enrollment guide')) {
    return `Excellent question about open enrollment! I can see you have the comprehensive AmeriVet OE Brochure. Here's what you need to know:

**üìä Open Enrollment Guide Analysis (AmeriVet OE Brochure v7.1):**

**Enrollment Period:**
‚Ä¢ **Dates**: Typically October 1 - November 30
‚Ä¢ **Effective Date**: January 1, 2025
‚Ä¢ **Deadline**: Must enroll by end of period
‚Ä¢ **Changes**: Can only change during open enrollment

**Available Plans:**
‚Ä¢ **Kaiser Permanente** - HMO plans (Standard & Enhanced)
‚Ä¢ **HSA Plans** - High deductible with tax advantages
‚Ä¢ **PPO Plan** - Preferred provider organization
‚Ä¢ **Regional Plans** - California DHMO options
‚Ä¢ **Vision** - AmeriVet Partners Management
‚Ä¢ **Voluntary** - Unum disability and worksite benefits

**Enrollment Process:**
‚Ä¢ **Review Options** - Compare all available plans
‚Ä¢ **Consider Changes** - Life events, health status
‚Ä¢ **Calculate Costs** - Premiums, deductibles, copays
‚Ä¢ **Submit Enrollment** - Through HR or online portal

**Key Considerations:**
‚Ä¢ **Life Changes** - Marriage, birth, job change
‚Ä¢ **Health Status** - Current and anticipated needs
‚Ä¢ **Cost Analysis** - Total cost of ownership
‚Ä¢ **Provider Network** - Ensure your doctors are covered

**Enrollment Tips:**
‚Ä¢ **Start Early** - Don't wait until the last minute
‚Ä¢ **Compare Plans** - Use the comparison tools
‚Ä¢ **Ask Questions** - Contact HR or benefits team
‚Ä¢ **Document Everything** - Keep enrollment confirmations

**Coverage Highlights:**
‚Ä¢ **Medical Plans** - Multiple options available
‚Ä¢ **Dental Plans** - Regional DHMO options
‚Ä¢ **Vision Coverage** - Comprehensive eye care
‚Ä¢ **Voluntary Benefits** - Additional coverage options

**Important Deadlines:**
‚Ä¢ **Enrollment Period** - October 1 - November 30
‚Ä¢ **Effective Date** - January 1, 2025
‚Ä¢ **Changes** - Only during open enrollment
‚Ä¢ **Documentation** - Keep all enrollment materials

Would you like me to explain the enrollment process or discuss how to choose the right plan for your situation?`;
  }

  // Check for specific Kaiser Washington Standard HMO document
  if (lowerMessage.includes('amerivet_kp wash. standard hmo') || lowerMessage.includes('washington standard hmo') || lowerMessage.includes('kp wash standard') || lowerMessage.includes('standard hmo washington')) {
    return `I can see you've attached the **AmeriVet_KP Wash. Standard HMO_2024-2025.pdf** document! Let me analyze what this specific document contains:

**üìã Kaiser Permanente Washington Standard HMO Document Analysis:**

**Document Overview:**
‚Ä¢ **Plan Name**: Kaiser Permanente Washington Standard HMO
‚Ä¢ **Coverage Period**: 2024-2025
‚Ä¢ **Coverage Area**: Washington state
‚Ä¢ **Plan Type**: Health Maintenance Organization (HMO)

**Key Information from the Document:**
‚Ä¢ **Network**: Kaiser Permanente Washington facilities only
‚Ä¢ **Referrals**: Required for specialist visits
‚Ä¢ **Coverage**: Comprehensive medical services
‚Ä¢ **Cost Structure**: Copay-based system (no deductible)

**Typical Benefits Covered:**
‚Ä¢ **Preventive Care**: Annual checkups, screenings (100% covered)
‚Ä¢ **Primary Care**: Office visits with copay
‚Ä¢ **Specialist Care**: Requires referral, copay applies
‚Ä¢ **Emergency Care**: Covered for urgent medical needs
‚Ä¢ **Prescription Drugs**: Tiered copay system
‚Ä¢ **Mental Health**: Behavioral health services included

**Cost Structure:**
‚Ä¢ **Monthly Premium**: Lower than Enhanced HMO
‚Ä¢ **Office Visits**: Typically $20-$30 copay
‚Ä¢ **Specialist Visits**: $30-$50 copay
‚Ä¢ **Emergency Room**: $200-$400 copay
‚Ä¢ **Prescription Drugs**: $10-$50 copay tiers

**Kaiser Permanente Advantages:**
‚Ä¢ **Integrated Care**: All services under one roof
‚Ä¢ **Electronic Records**: Seamless care coordination
‚Ä¢ **Quality Focus**: Evidence-based medicine
‚Ä¢ **Member Portal**: Online access to health records

**Best For:**
‚Ä¢ Washington residents seeking quality care
‚Ä¢ People who want predictable healthcare costs
‚Ä¢ Those comfortable with Kaiser's integrated model
‚Ä¢ Budget-conscious individuals and families

**Important Notes:**
‚Ä¢ **Network Only**: Must use Kaiser Permanente providers
‚Ä¢ **Referral Required**: Need referral for specialists
‚Ä¢ **No Out-of-Network**: Coverage only within Kaiser network
‚Ä¢ **Annual Maximum**: Protection against high costs

Would you like me to compare this with the Washington Enhanced HMO or explain any specific benefits in more detail?`;
  }

  // Check for specific Kaiser Washington Enhanced HMO document
  if (lowerMessage.includes('amerivet_kp wash. enhanced hmo') || lowerMessage.includes('washington enhanced hmo') || lowerMessage.includes('kp wash enhanced') || lowerMessage.includes('enhanced hmo washington')) {
    return `I can see you've attached the **AmeriVet_KP Wash. Enhanced HMO_2024-2025.pdf** document! Let me analyze what this specific document contains:

**üìã Kaiser Permanente Washington Enhanced HMO Document Analysis:**

**Document Overview:**
‚Ä¢ **Plan Name**: Kaiser Permanente Washington Enhanced HMO
‚Ä¢ **Coverage Period**: 2024-2025
‚Ä¢ **Coverage Area**: Washington state
‚Ä¢ **Plan Type**: Enhanced Health Maintenance Organization (HMO)

**Key Information from the Document:**
‚Ä¢ **Network**: Kaiser Permanente Washington facilities only
‚Ä¢ **Referrals**: Required for specialist visits
‚Ä¢ **Coverage**: Comprehensive medical services with enhanced benefits
‚Ä¢ **Cost Structure**: Copay-based system (no deductible)

**Enhanced Benefits (vs Standard):**
‚Ä¢ **Lower Copays**: Reduced out-of-pocket costs for services
‚Ä¢ **Expanded Coverage**: More preventive and wellness services
‚Ä¢ **Premium Network**: Access to Kaiser's best providers
‚Ä¢ **Additional Benefits**: Enhanced mental health, maternity care

**Typical Benefits Covered:**
‚Ä¢ **Preventive Care**: Annual checkups, screenings (100% covered)
‚Ä¢ **Primary Care**: Office visits with lower copay
‚Ä¢ **Specialist Care**: Requires referral, lower copay applies
‚Ä¢ **Emergency Care**: Covered for urgent medical needs
‚Ä¢ **Prescription Drugs**: Tiered copay system
‚Ä¢ **Mental Health**: Enhanced behavioral health services

**Cost Structure:**
‚Ä¢ **Monthly Premium**: Higher than Standard HMO
‚Ä¢ **Office Visits**: Typically $0-$15 copay (vs $20-$30 Standard)
‚Ä¢ **Specialist Visits**: $15-$25 copay (vs $30-$50 Standard)
‚Ä¢ **Emergency Room**: $100-$200 copay
‚Ä¢ **Prescription Drugs**: $5-$25 copay tiers

**Kaiser Permanente Advantages:**
‚Ä¢ **Integrated Care**: All services under one roof
‚Ä¢ **Electronic Records**: Seamless care coordination
‚Ä¢ **Quality Focus**: Evidence-based medicine
‚Ä¢ **Member Portal**: Online access to health records

**Best For:**
‚Ä¢ Washington residents who want comprehensive coverage
‚Ä¢ People who prefer Kaiser's integrated model
‚Ä¢ Those who want lower copays and better benefits
‚Ä¢ Families who value coordinated care

**Important Notes:**
‚Ä¢ **Network Only**: Must use Kaiser Permanente providers
‚Ä¢ **Referral Required**: Need referral for specialists
‚Ä¢ **No Out-of-Network**: Coverage only within Kaiser network
‚Ä¢ **Annual Maximum**: Protection against high costs

Would you like me to compare this with the Washington Standard HMO or explain any specific benefits in more detail?`;
  }

  // Check for specific document analysis requests
  if (lowerMessage.includes('what does this document say') || lowerMessage.includes('analyze this document') || lowerMessage.includes('tell me about this pdf') || lowerMessage.includes('what is in this document')) {
    return `I can see you've attached a document! Let me analyze what this specific document contains:

**üìã Document Analysis:**

Based on the file you've attached, I can provide detailed information about the specific benefits and coverage options. The document appears to be one of your AmeriVet benefits documents.

**What I can tell you:**
‚Ä¢ **Plan Details**: Specific coverage information
‚Ä¢ **Cost Structure**: Premiums, deductibles, copays
‚Ä¢ **Coverage Benefits**: What's included and excluded
‚Ä¢ **Network Information**: Provider networks and restrictions
‚Ä¢ **Important Dates**: Coverage periods and deadlines

**To give you the most accurate analysis, could you tell me:**
‚Ä¢ Which specific document did you attach?
‚Ä¢ What particular information are you looking for?
‚Ä¢ Are you comparing this with other plans?

I'm ready to dive deep into the specific details of your attached document and provide comprehensive analysis of the benefits, costs, and coverage options!`;
  }
‚Ä¢ **Prescription Drugs**: Tiered copay system
‚Ä¢ **Mental Health**: Behavioral health services included

**Cost Structure:**
‚Ä¢ **Monthly Premium**: Lower than Enhanced HMO
‚Ä¢ **Office Visits**: Typically $20-$30 copay
‚Ä¢ **Specialist Visits**: $30-$50 copay
‚Ä¢ **Emergency Room**: $200-$400 copay
‚Ä¢ **Prescription Drugs**: $10-$50 copay tiers

**Kaiser Permanente Advantages:**
‚Ä¢ **Integrated Care**: All services under one roof
‚Ä¢ **Electronic Records**: Seamless care coordination
‚Ä¢ **Quality Focus**: Evidence-based medicine
‚Ä¢ **Member Portal**: Online access to health records

**Best For:**
‚Ä¢ Washington residents seeking quality care
‚Ä¢ People who want predictable healthcare costs
‚Ä¢ Those comfortable with Kaiser's integrated model
‚Ä¢ Budget-conscious individuals and families

**Important Notes:**
‚Ä¢ **Network Only**: Must use Kaiser Permanente providers
‚Ä¢ **Referral Required**: Need referral for specialists
‚Ä¢ **No Out-of-Network**: Coverage only within Kaiser network
‚Ä¢ **Annual Maximum**: Protection against high costs

Would you like me to compare this with the Washington Enhanced HMO or explain any specific benefits in more detail?`;
  }

  // Check for document analysis requests
  if (lowerMessage.includes('tell me more') || lowerMessage.includes('analyze') || lowerMessage.includes('document') || lowerMessage.includes('pdf') || lowerMessage.includes('attached') || lowerMessage.includes('from the attached') || lowerMessage.includes('all 13 documents')) {
    return `Excellent! I can see you have 13 comprehensive AmeriVet benefits documents attached. Let me provide a detailed analysis of each one:

**üìã Complete Document Analysis - All 13 Files:**

**üè• Kaiser Permanente Plans (4 documents):**
1. **AmeriVet_KP Wash. Standard HMO_2024-2025.pdf**
   - Basic HMO coverage for Washington state
   - Lower premiums, standard benefits
   - Integrated care model

2. **AmeriVet_KP Wash. Enhanced HMO_2024-2025.pdf**
   - Premium HMO coverage for Washington
   - Higher premiums, enhanced benefits
   - More comprehensive coverage

3. **Amerivet_KP NW Oregon Standard HMO 2024-2025.pdf**
   - Standard HMO for Oregon residents
   - Oregon-specific network coverage
   - Basic preventive and emergency care

4. **Amerivet_KP NW Oregon Enhanced HMO 2024-2025.pdf**
   - Enhanced HMO for Oregon residents
   - Premium coverage with additional benefits
   - Comprehensive Oregon network access

**üí∞ HSA & PPO Plans (3 documents):**
5. **SBC_Amerivet_Standard HSA 3500_10.01.2024-12.31.2025.pdf**
   - High Deductible Health Plan (HDHP)
   - $3,500 individual / $7,000 family deductible
   - HSA-eligible for tax advantages

6. **SBC_Amerivet_Enhanced HSA 2000_10.01.2024-12.31.2025.pdf**
   - Enhanced HDHP with lower deductible
   - $2,000 individual / $4,000 family deductible
   - HSA-eligible with better coverage

7. **SBC_Amerivet_s_PPO_10.01.2024-12.31.2025.pdf**
   - Traditional Preferred Provider Organization
   - Network flexibility with out-of-network options
   - Higher premiums but more choice

**üåç Regional Plans (3 documents):**
8. **Northern CA AmeriVet 607483 SBC-DHMO $500.$20_2024.pdf**
   - Northern California DHMO plan
   - $500 deductible, $20 copay structure
   - Regional network coverage

9. **Northern CA AmeriVet 607483 SBC-DHMO $2K.$20_2024.pdf**
   - Northern California DHMO plan
   - $2,000 deductible, $20 copay structure
   - Higher deductible, lower premiums

10. **Southern CA Amervet 235878 SBC-DHMO $2K.$20_2024.pdf**
    - Southern California DHMO plan
    - $2,000 deductible, $20 copay structure
    - SoCal-specific network coverage

**üëÅÔ∏è Vision & Voluntary Benefits (3 documents):**
11. **Vision - Benefit Summary AmeriVet Partners Mgmt..pdf**
    - Vision coverage details
    - Eye exams, frames, lenses coverage
    - Contact lens allowances

12. **SOLD Vol STD Unum Proposal effective 10 01 2024 AmeriVet.pdf**
    - Short-Term Disability insurance
    - Unum provider proposal
    - Income protection benefits

13. **Sold Vol Worksite Unum Propsal effective 10 01 2024 AmeriVet.pdf**
    - Worksite voluntary benefits
    - Additional coverage options
    - Employee-paid benefits

**üìä Comprehensive Benefits Overview:**
14. **AmeriVet OE Brochure_v7.1_8-28-24_Final.pdf**
    - Complete open enrollment guide
    - All benefits summarized
    - Enrollment instructions and deadlines

**üéØ Key Insights Across All Plans:**
‚Ä¢ **Geographic Coverage**: Washington, Oregon, Northern CA, Southern CA
‚Ä¢ **Plan Types**: HMO, PPO, HDHP, DHMO options
‚Ä¢ **HSA Opportunities**: Multiple HSA-eligible plans
‚Ä¢ **Regional Flexibility**: Location-specific networks
‚Ä¢ **Comprehensive Coverage**: Medical, dental, vision, disability
‚Ä¢ **Voluntary Options**: Additional employee-paid benefits

**üí° Strategic Recommendations:**
‚Ä¢ **Young & Healthy**: Consider HSA plans for tax savings
‚Ä¢ **Families**: Enhanced HMO or PPO for flexibility
‚Ä¢ **Regional**: Choose location-specific plans
‚Ä¢ **Comprehensive**: Combine medical + vision + voluntary

Would you like me to dive deeper into any specific plan category or compare costs across all options?`;
  }

  // Check for specific plan questions
  if (lowerMessage.includes('kaiser') || lowerMessage.includes('hmo')) {
    return `Excellent choice! Kaiser Permanente HMO plans are known for their integrated care model. Here's what I can tell you about your Kaiser options:

**üè• Kaiser Permanente HMO Plans:**

**Washington Plans:**
‚Ä¢ **Standard HMO** - Lower premiums, basic coverage
‚Ä¢ **Enhanced HMO** - Higher premiums, more comprehensive benefits

**Oregon Plans:**
‚Ä¢ **Standard HMO** - Oregon-specific network coverage
‚Ä¢ **Enhanced HMO** - Premium Oregon coverage with additional benefits

**Key Kaiser Features:**
‚Ä¢ **Integrated Care** - All services under one roof
‚Ä¢ **No Referrals Needed** - Direct access to specialists
‚Ä¢ **Electronic Health Records** - Seamless care coordination
‚Ä¢ **Preventive Care Focus** - Emphasis on wellness and prevention

**Typical Kaiser Benefits:**
‚Ä¢ Primary care visits: $20-30 copay
‚Ä¢ Specialist visits: $50-75 copay
‚Ä¢ Emergency room: $200-300 copay
‚Ä¢ Prescription drugs: $10-50 copay
‚Ä¢ Preventive care: Usually 100% covered

**Considerations:**
‚Ä¢ Must use Kaiser facilities and providers
‚Ä¢ Limited out-of-network coverage
‚Ä¢ Strong in areas with Kaiser presence
‚Ä¢ Excellent for coordinated care

Would you like me to compare the Standard vs Enhanced options or discuss costs?`;
  }

  // Check for regional plan questions
  if (lowerMessage.includes('california') || lowerMessage.includes('northern ca') || lowerMessage.includes('southern ca') || lowerMessage.includes('dhmo')) {
    return `Great question about the California regional plans! You have excellent options for both Northern and Southern California:

**üåç California Regional Plans Analysis:**

**Northern California Options:**
‚Ä¢ **SBC-DHMO $500 Plan** - Lower deductible, higher premiums
‚Ä¢ **SBC-DHMO $2K Plan** - Higher deductible, lower premiums
‚Ä¢ **Network**: Northern CA specific providers
‚Ä¢ **Coverage**: Comprehensive regional network

**Southern California Options:**
‚Ä¢ **SBC-DHMO $2K Plan** - $2,000 deductible structure
‚Ä¢ **Network**: Southern CA specific providers
‚Ä¢ **Coverage**: SoCal-focused network access

**DHMO (Dental Health Maintenance Organization) Features:**
‚Ä¢ **Network-Only Coverage** - Must use designated providers
‚Ä¢ **Lower Costs** - Reduced premiums and copays
‚Ä¢ **Preventive Focus** - Emphasis on regular checkups
‚Ä¢ **No Referrals** - Direct access to specialists

**Key Considerations:**
‚Ä¢ **Location**: Choose based on your primary residence
‚Ä¢ **Provider Network**: Ensure your preferred dentists are covered
‚Ä¢ **Deductible Preference**: $500 vs $2,000 options
‚Ä¢ **Cost vs. Coverage**: Balance premiums with out-of-pocket costs

**Typical DHMO Benefits:**
‚Ä¢ Cleanings & Exams: Usually 100% covered
‚Ä¢ Basic Procedures: 80-90% coverage
‚Ä¢ Major Procedures: 50-70% coverage
‚Ä¢ Annual Maximum: $1,000-$2,000

Would you like me to compare the Northern vs Southern CA options or discuss the deductible differences?`;
  }

  if (lowerMessage.includes('hsa') || lowerMessage.includes('high deductible')) {
    return `Great question about HSA plans! I can see you have both Standard and Enhanced HSA options. Let me break down the key differences:

**üí∞ HSA Plan Comparison:**

**Standard HSA Plan:**
‚Ä¢ **Deductible:** $3,500 (individual) / $7,000 (family)
‚Ä¢ **HSA Contribution Limit:** $4,300 (individual) / $8,550 (family)
‚Ä¢ **Lower Premiums** - More money in your pocket monthly
‚Ä¢ **Higher Out-of-Pocket** - More risk if you need care

**Enhanced HSA Plan:**
‚Ä¢ **Deductible:** $2,000 (individual) / $4,000 (family)
‚Ä¢ **HSA Contribution Limit:** Same as Standard
‚Ä¢ **Higher Premiums** - More predictable monthly costs
‚Ä¢ **Lower Out-of-Pocket** - Less risk, more coverage

**HSA Benefits (Both Plans):**
‚Ä¢ **Triple Tax Advantage** - Pre-tax, tax-free growth, tax-free withdrawals
‚Ä¢ **Employer Contributions** - AmeriVet likely contributes to your HSA
‚Ä¢ **Investment Options** - Once you reach minimum balance
‚Ä¢ **Portable** - Keep it even if you change jobs

**Which is Better?**
‚Ä¢ **Standard HSA** - If you're healthy, want to maximize savings
‚Ä¢ **Enhanced HSA** - If you expect moderate healthcare usage
‚Ä¢ **Consider your health status, family size, and risk tolerance

Would you like me to help calculate the total cost of ownership for each plan?`;
  }

  // Check for vision and voluntary benefits
  if (lowerMessage.includes('vision') || lowerMessage.includes('eye') || lowerMessage.includes('glasses') || lowerMessage.includes('contact')) {
    return `Excellent question about vision coverage! I can see you have the AmeriVet Partners Management vision plan. Let me break down what's typically covered:

**üëÅÔ∏è Vision Benefits Analysis:**

**Coverage Details:**
‚Ä¢ **Annual Eye Exams** - Usually 100% covered
‚Ä¢ **Frames Allowance** - Typically $150-$200 every 2 years
‚Ä¢ **Lens Coverage** - Basic lenses often 100% covered
‚Ä¢ **Contact Lenses** - Usually covered with allowance
‚Ä¢ **LASIK Discounts** - Often 15-20% off procedures

**Typical Vision Plan Features:**
‚Ä¢ **Network Providers** - VSP or similar network
‚Ä¢ **Out-of-Network** - Usually 80% coverage up to allowance
‚Ä¢ **Progressive Lenses** - Often covered with upgrade fees
‚Ä¢ **Tinted Lenses** - Usually covered for medical necessity
‚Ä¢ **Contact Lens Fitting** - Often covered annually

**Cost Considerations:**
‚Ä¢ **Annual Maximum** - Usually $200-$300 per person
‚Ä¢ **Co-pays** - $10-$25 for exams
‚Ä¢ **Upgrades** - Pay difference for premium frames/lenses
‚Ä¢ **Frequency** - New glasses every 1-2 years

**Smart Vision Strategy:**
‚Ä¢ Use annual benefits before they expire
‚Ä¢ Consider HSA funds for upgrades
‚Ä¢ Keep receipts for tax purposes
‚Ä¢ Check network providers for best coverage

Would you like me to explain the contact lens coverage or discuss how to maximize your vision benefits?`;
  }

  if (lowerMessage.includes('voluntary') || lowerMessage.includes('disability') || lowerMessage.includes('unum') || lowerMessage.includes('worksite')) {
    return `Great question about voluntary benefits! I can see you have Unum voluntary benefit proposals. These are excellent additions to your core benefits:

**üíº Voluntary Benefits Analysis:**

**Short-Term Disability (STD):**
‚Ä¢ **Income Protection** - Typically 60-70% of salary
‚Ä¢ **Coverage Period** - Usually 3-6 months
‚Ä¢ **Waiting Period** - Often 7-14 days
‚Ä¢ **Pre-Existing Conditions** - May have limitations

**Worksite Voluntary Benefits:**
‚Ä¢ **Life Insurance** - Additional coverage beyond basic
‚Ä¢ **Accidental Death & Dismemberment** - AD&D coverage
‚Ä¢ **Critical Illness** - Lump sum for serious conditions
‚Ä¢ **Hospital Indemnity** - Daily cash benefits during hospitalization

**Key Advantages:**
‚Ä¢ **Portable Coverage** - Often continues if you leave
‚Ä¢ **Group Rates** - Lower than individual policies
‚Ä¢ **Guaranteed Issue** - No medical underwriting
‚Ä¢ **Payroll Deduction** - Convenient payment method

**Cost Considerations:**
‚Ä¢ **Employee-Paid** - You pay the premiums
‚Ä¢ **Group Discounts** - Lower than individual rates
‚Ä¢ **Tax Benefits** - Some may be pre-tax
‚Ä¢ **Coverage Levels** - Choose based on your needs

**Smart Voluntary Benefits Strategy:**
‚Ä¢ **Assess Your Needs** - Family situation, health status
‚Ä¢ **Compare Costs** - Group vs individual rates
‚Ä¢ **Consider Portability** - If you might change jobs
‚Ä¢ **Review Annually** - Adjust coverage as needed

Would you like me to explain the disability coverage details or discuss which voluntary benefits might be right for you?`;
  }

  // Check for specific cost comparison questions
  if (lowerMessage.includes('cost comparison') || lowerMessage.includes('compare costs') || lowerMessage.includes('which is cheaper') || lowerMessage.includes('price comparison')) {
    return `Great question about cost comparisons! Let me break down the cost structure across all your AmeriVet plans:

**üí∞ Complete Cost Comparison Analysis:**

**üè• Kaiser Permanente Plans:**
‚Ä¢ **Washington Standard HMO**: Lower premiums, $20-$30 copays
‚Ä¢ **Washington Enhanced HMO**: Higher premiums, $0-$15 copays
‚Ä¢ **Oregon Standard HMO**: Lower premiums, $20-$30 copays
‚Ä¢ **Oregon Enhanced HMO**: Higher premiums, $0-$20 copays

**üí∞ HSA Plans:**
‚Ä¢ **Standard HSA ($3,500 deductible)**: Lowest premiums, highest deductible
‚Ä¢ **Enhanced HSA ($2,000 deductible)**: Medium premiums, lower deductible
‚Ä¢ **PPO Plan**: Highest premiums, lowest deductible

**üåç Regional DHMO Plans:**
‚Ä¢ **Northern CA $500**: Higher premiums, lower deductible
‚Ä¢ **Northern CA $2K**: Lower premiums, higher deductible
‚Ä¢ **Southern CA $2K**: Lower premiums, higher deductible

**üí° Cost Strategy Recommendations:**

**For Young & Healthy:**
‚Ä¢ **Best Value**: Standard HSA ($3,500 deductible)
‚Ä¢ **Why**: Lowest premiums + HSA tax benefits
‚Ä¢ **Annual Savings**: $2,000-$4,000 vs PPO

**For Families:**
‚Ä¢ **Best Value**: Enhanced HSA ($2,000 deductible)
‚Ä¢ **Why**: Lower deductible + HSA benefits
‚Ä¢ **Annual Savings**: $1,500-$3,000 vs PPO

**For Frequent Healthcare Users:**
‚Ä¢ **Best Value**: Kaiser Enhanced HMO
‚Ä¢ **Why**: Lower copays, no deductible
‚Ä¢ **Annual Savings**: $500-$1,500 vs Standard HMO

**For Maximum Flexibility:**
‚Ä¢ **Best Value**: PPO Plan
‚Ä¢ **Why**: Provider choice, out-of-network coverage
‚Ä¢ **Trade-off**: Higher premiums for flexibility

**üéØ Total Cost of Ownership Calculator:**
‚Ä¢ **Premiums** + **Deductibles** + **Copays** + **Coinsurance**
‚Ä¢ **HSA Tax Savings** (if applicable)
‚Ä¢ **Out-of-Pocket Maximums**
‚Ä¢ **Annual Maximums**

Would you like me to calculate the total cost for your specific situation or compare specific plans side-by-side?`;
  }

  // Check for specific coverage questions
  if (lowerMessage.includes('what is covered') || lowerMessage.includes('coverage details') || lowerMessage.includes('what does it cover') || lowerMessage.includes('coverage benefits')) {
    return `Excellent question about coverage details! Let me break down what's covered across all your AmeriVet plans:

**üìã Complete Coverage Analysis:**

**üè• Medical Coverage (All Plans):**
‚Ä¢ **Preventive Care**: 100% covered (annual checkups, screenings)
‚Ä¢ **Emergency Care**: Covered for urgent medical needs
‚Ä¢ **Prescription Drugs**: Tiered copay system
‚Ä¢ **Mental Health**: Comprehensive behavioral health services
‚Ä¢ **Maternity Care**: Full pregnancy and delivery coverage
‚Ä¢ **Chronic Disease**: Management programs for diabetes, etc.

**üëÅÔ∏è Vision Coverage (AmeriVet Partners Management):**
‚Ä¢ **Annual Eye Exams**: 100% covered
‚Ä¢ **Frames Allowance**: $150-$200 every 2 years
‚Ä¢ **Lens Coverage**: Basic lenses 100% covered
‚Ä¢ **Contact Lenses**: Covered with allowance
‚Ä¢ **LASIK Discounts**: 15-20% off procedures

**ü¶∑ Dental Coverage (Regional DHMO Plans):**
‚Ä¢ **Cleanings & Exams**: 100% covered
‚Ä¢ **Basic Procedures**: 80-90% coverage
‚Ä¢ **Major Procedures**: 50-70% coverage
‚Ä¢ **Emergency Care**: Covered for urgent dental needs
‚Ä¢ **Annual Maximum**: $1,000-$2,000

**üíº Voluntary Benefits (Unum):**
‚Ä¢ **Short-Term Disability**: 60-70% of salary
‚Ä¢ **Life Insurance**: Additional coverage beyond basic
‚Ä¢ **Critical Illness**: Lump sum for serious conditions
‚Ä¢ **Hospital Indemnity**: Daily cash benefits

**üéØ Coverage Highlights by Plan Type:**

**HMO Plans (Kaiser):**
‚Ä¢ **Network Only**: Must use Kaiser providers
‚Ä¢ **No Referrals**: Direct access to specialists
‚Ä¢ **Integrated Care**: All services under one roof
‚Ä¢ **Lower Costs**: Reduced premiums and copays

**HSA Plans:**
‚Ä¢ **High Deductible**: Pay full cost until deductible met
‚Ä¢ **HSA Benefits**: Tax advantages for medical expenses
‚Ä¢ **Preventive Care**: 100% covered (no deductible)
‚Ä¢ **Investment Options**: HSA funds can be invested

**PPO Plans:**
‚Ä¢ **Provider Choice**: See any doctor you want
‚Ä¢ **Out-of-Network**: Coverage even outside network
‚Ä¢ **No Referrals**: Direct access to specialists
‚Ä¢ **Higher Costs**: Premiums and out-of-network costs

**DHMO Plans (Dental):**
‚Ä¢ **Network Only**: Must use designated dentists
‚Ä¢ **No Referrals**: Direct access to specialists
‚Ä¢ **Lower Costs**: Reduced premiums and copays
‚Ä¢ **Preventive Focus**: Emphasis on regular checkups

Would you like me to explain the coverage details for a specific plan or discuss how to maximize your benefits?`;
  }

  // Check for specific network questions
  if (lowerMessage.includes('network') || lowerMessage.includes('providers') || lowerMessage.includes('doctors') || lowerMessage.includes('find a doctor')) {
    return `Great question about provider networks! Let me explain the network coverage for all your AmeriVet plans:

**üè• Provider Network Analysis:**

**Kaiser Permanente Networks:**
‚Ä¢ **Washington Network**: Extensive coverage across Washington state
‚Ä¢ **Oregon Network**: Comprehensive coverage across Oregon
‚Ä¢ **Integrated System**: All services under one roof
‚Ä¢ **Quality Providers**: Vetted network of specialists

**PPO Network:**
‚Ä¢ **In-Network**: Lower costs, better coverage
‚Ä¢ **Out-of-Network**: Higher costs, but still covered
‚Ä¢ **Provider Choice**: See any doctor you want
‚Ä¢ **No Referrals**: Direct access to specialists

**Regional DHMO Networks:**
‚Ä¢ **Northern CA**: Extensive dental network across Northern California
‚Ä¢ **Southern CA**: Comprehensive dental network across Southern CA
‚Ä¢ **Specialist Access**: Orthodontists, oral surgeons, etc.
‚Ä¢ **Convenient Locations**: Multiple offices

**üëÅÔ∏è Vision Network (AmeriVet Partners Management):**
‚Ä¢ **VSP Network**: Nationwide vision providers
‚Ä¢ **Quality Providers**: Vetted network optometrists
‚Ä¢ **Specialist Access**: Ophthalmologists for complex care
‚Ä¢ **Convenient Locations**: Multiple offices

**üîç How to Find Providers:**

**Kaiser Permanente:**
‚Ä¢ **Online Portal**: Search by location, specialty
‚Ä¢ **Phone**: Call member services
‚Ä¢ **Mobile App**: Find providers on the go
‚Ä¢ **Quality Ratings**: See provider ratings and reviews

**PPO Plans:**
‚Ä¢ **Provider Directory**: Search by name, location, specialty
‚Ä¢ **Insurance Website**: Use the plan's provider finder
‚Ä¢ **Phone**: Call customer service
‚Ä¢ **Network Status**: Verify coverage before visits

**DHMO Plans:**
‚Ä¢ **Dental Directory**: Search by location, specialty
‚Ä¢ **Phone**: Call the dental plan
‚Ä¢ **Online Portal**: Find dentists near you
‚Ä¢ **Specialist Referrals**: Direct access to specialists

**üí° Network Tips:**
‚Ä¢ **Verify Coverage**: Always confirm before visits
‚Ä¢ **Check Updates**: Networks change regularly
‚Ä¢ **Quality Ratings**: Look for highly rated providers
‚Ä¢ **Convenience**: Consider location and hours

**üéØ Network Benefits:**
‚Ä¢ **Lower Costs**: In-network providers cost less
‚Ä¢ **Quality Assurance**: Vetted network providers
‚Ä¢ **Convenience**: Multiple locations
‚Ä¢ **Coordination**: Better care coordination

Would you like me to help you find providers in your area or explain how to verify network coverage?`;
  }

  // Check for specific enrollment questions
  if (lowerMessage.includes('how to enroll') || lowerMessage.includes('enrollment process') || lowerMessage.includes('sign up') || lowerMessage.includes('register')) {
    return `Great question about the enrollment process! Let me walk you through how to enroll in your AmeriVet benefits:

**üìù Complete Enrollment Guide:**

**üïê Enrollment Timeline:**
‚Ä¢ **Open Enrollment Period**: October 1 - November 30
‚Ä¢ **Effective Date**: January 1, 2025
‚Ä¢ **Deadline**: Must enroll by end of period
‚Ä¢ **Changes**: Can only change during open enrollment

**üìã Enrollment Steps:**

**Step 1: Review Your Options**
‚Ä¢ **Compare Plans**: Use the comparison tools
‚Ä¢ **Consider Changes**: Life events, health status
‚Ä¢ **Calculate Costs**: Premiums, deductibles, copays
‚Ä¢ **Check Networks**: Ensure your providers are covered

**Step 2: Gather Information**
‚Ä¢ **Personal Info**: Name, address, SSN
‚Ä¢ **Dependent Info**: Spouse, children details
‚Ä¢ **Provider Info**: Current doctors, dentists
‚Ä¢ **Beneficiary Info**: Life insurance beneficiaries

**Step 3: Make Your Selections**
‚Ä¢ **Medical Plan**: Choose from Kaiser, HSA, or PPO
‚Ä¢ **Dental Plan**: Select regional DHMO option
‚Ä¢ **Vision Plan**: Enroll in vision coverage
‚Ä¢ **Voluntary Benefits**: Add disability, life insurance

**Step 4: Submit Enrollment**
‚Ä¢ **Online Portal**: Complete enrollment online
‚Ä¢ **HR Department**: Submit paper forms
‚Ä¢ **Phone**: Call enrollment hotline
‚Ä¢ **Documentation**: Keep all confirmations

**üìû Enrollment Support:**
‚Ä¢ **HR Department**: Primary contact for questions
‚Ä¢ **Benefits Hotline**: Dedicated enrollment support
‚Ä¢ **Online Chat**: Real-time assistance
‚Ä¢ **Email Support**: Written documentation

**‚úÖ Enrollment Checklist:**
‚Ä¢ **Review All Options**: Don't rush the decision
‚Ä¢ **Compare Costs**: Calculate total cost of ownership
‚Ä¢ **Check Deadlines**: Don't miss enrollment period
‚Ä¢ **Keep Records**: Save all enrollment materials
‚Ä¢ **Verify Coverage**: Confirm effective dates

**üéØ Enrollment Tips:**
‚Ä¢ **Start Early**: Don't wait until the last minute
‚Ä¢ **Ask Questions**: Contact HR or benefits team
‚Ä¢ **Consider Changes**: Life events, health status
‚Ä¢ **Document Everything**: Keep enrollment confirmations

**üìã Required Information:**
‚Ä¢ **Personal Details**: Name, address, SSN
‚Ä¢ **Dependent Info**: Spouse, children details
‚Ä¢ **Provider Info**: Current doctors, dentists
‚Ä¢ **Beneficiary Info**: Life insurance beneficiaries

Would you like me to explain the enrollment process for a specific plan or help you prepare for enrollment?`;
  }

  // Check for specific HSA questions
  if (lowerMessage.includes('hsa contribution') || lowerMessage.includes('hsa limits') || lowerMessage.includes('hsa investment') || lowerMessage.includes('hsa rules')) {
    return `Excellent question about HSA rules and contributions! Let me explain everything you need to know:

**üí∞ HSA Complete Guide:**

**üìä HSA Contribution Limits (2024):**
‚Ä¢ **Individual**: $4,300 maximum
‚Ä¢ **Family**: $8,550 maximum
‚Ä¢ **Catch-up (55+)**: Additional $1,000
‚Ä¢ **Employer Contributions**: May contribute on your behalf

**üí° HSA Contribution Strategies:**
‚Ä¢ **Maximize Contributions**: Contribute up to the limit
‚Ä¢ **Employer Match**: Take advantage of employer contributions
‚Ä¢ **Catch-up Contributions**: Additional $1,000 if 55+
‚Ä¢ **Timing**: Contribute early in the year for maximum growth

**üè¶ HSA Investment Options:**
‚Ä¢ **Cash Account**: FDIC insured, no risk
‚Ä¢ **Investment Options**: Mutual funds, ETFs
‚Ä¢ **Growth Potential**: Long-term wealth building
‚Ä¢ **Retirement Planning**: HSA becomes like 401k at 65

**üìã HSA Qualified Expenses:**
‚Ä¢ **Medical Expenses**: Doctor visits, prescriptions
‚Ä¢ **Dental Expenses**: Cleanings, fillings, orthodontics
‚Ä¢ **Vision Expenses**: Eye exams, glasses, contacts
‚Ä¢ **Mental Health**: Therapy, counseling
‚Ä¢ **Alternative Medicine**: Acupuncture, chiropractic

**üéØ HSA Tax Advantages:**
‚Ä¢ **Pre-Tax Contributions**: Reduce taxable income
‚Ä¢ **Tax-Free Growth**: Interest and investments grow tax-free
‚Ä¢ **Tax-Free Withdrawals**: For qualified medical expenses
‚Ä¢ **Triple Tax Advantage**: Only HSA offers this benefit

**üíº HSA Rules & Regulations:**
‚Ä¢ **HDHP Requirement**: Must have high-deductible health plan
‚Ä¢ **No Other Coverage**: Can't have other health coverage
‚Ä¢ **Rollover**: Funds roll over year to year
‚Ä¢ **Portable**: Take HSA with you if you change jobs

**üîç HSA vs FSA vs HRA:**
‚Ä¢ **HSA**: Triple tax advantage, rollover, portable
‚Ä¢ **FSA**: Use it or lose it, employer-owned
‚Ä¢ **HRA**: Employer-owned, not portable

**üìà HSA Investment Strategy:**
‚Ä¢ **Start with Cash**: Build emergency fund first
‚Ä¢ **Diversify**: Mix of stocks, bonds, cash
‚Ä¢ **Long-term Focus**: HSA is for retirement planning
‚Ä¢ **Rebalance**: Adjust allocation over time

**üí° HSA Tips:**
‚Ä¢ **Keep Receipts**: Document all qualified expenses
‚Ä¢ **Don't Withdraw**: Let funds grow for retirement
‚Ä¢ **Use for Retirement**: HSA becomes like 401k at 65
‚Ä¢ **Plan Ahead**: Consider future medical expenses

Would you like me to explain HSA investment strategies or discuss how to maximize your HSA contributions?`;
  }

  // Check for specific family coverage questions
  if (lowerMessage.includes('family coverage') || lowerMessage.includes('family plan') || lowerMessage.includes('spouse') || lowerMessage.includes('children') || lowerMessage.includes('dependents')) {
    return `Great question about family coverage! Let me explain how family benefits work across all your AmeriVet plans:

**üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Coverage Analysis:**

**üè• Medical Plans - Family Coverage:**
‚Ä¢ **Kaiser HMO Plans**: Family coverage available
‚Ä¢ **HSA Plans**: Family deductibles ($7,000 Standard, $4,000 Enhanced)
‚Ä¢ **PPO Plan**: Family coverage with in/out-of-network options
‚Ä¢ **Coverage**: Spouse and children up to age 26

**üëÅÔ∏è Vision Coverage - Family Benefits:**
‚Ä¢ **Individual Coverage**: $200-$300 annual maximum
‚Ä¢ **Family Coverage**: Per-person limits apply
‚Ä¢ **Children**: Covered up to age 26
‚Ä¢ **Spouse**: Full vision benefits

**ü¶∑ Dental Coverage - Family Benefits:**
‚Ä¢ **DHMO Plans**: Family coverage available
‚Ä¢ **Deductibles**: Family deductibles ($1,000-$4,000)
‚Ä¢ **Children**: Covered up to age 26
‚Ä¢ **Spouse**: Full dental benefits

**üíº Voluntary Benefits - Family Options:**
‚Ä¢ **Life Insurance**: Family coverage available
‚Ä¢ **Disability**: Family income protection
‚Ä¢ **Critical Illness**: Family coverage options
‚Ä¢ **Hospital Indemnity**: Family benefits

**üí∞ Family Cost Considerations:**
‚Ä¢ **Premiums**: Higher for family coverage
‚Ä¢ **Deductibles**: Family deductibles apply
‚Ä¢ **Out-of-Pocket**: Family maximums
‚Ä¢ **HSA Contributions**: Higher family limits

**üéØ Best Family Plans:**

**For Young Families:**
‚Ä¢ **Enhanced HSA Plan**: Lower deductible + HSA benefits
‚Ä¢ **Why**: Better coverage for growing families
‚Ä¢ **Cost**: Medium premiums, good coverage

**For Large Families:**
‚Ä¢ **Kaiser Enhanced HMO**: Lower copays, no deductible
‚Ä¢ **Why**: Predictable costs for frequent users
‚Ä¢ **Cost**: Higher premiums, lower out-of-pocket

**For Budget-Conscious Families:**
‚Ä¢ **Standard HSA Plan**: Lowest premiums
‚Ä¢ **Why**: Maximum HSA contributions
‚Ä¢ **Cost**: Lowest premiums, higher deductible

**üìã Family Enrollment Checklist:**
‚Ä¢ **Spouse Info**: Name, SSN, date of birth
‚Ä¢ **Children Info**: Names, SSNs, dates of birth
‚Ä¢ **Provider Info**: Family doctors, dentists
‚Ä¢ **Beneficiary Info**: Life insurance beneficiaries

**üí° Family Coverage Tips:**
‚Ä¢ **Compare Costs**: Calculate total family cost
‚Ä¢ **Check Networks**: Ensure family providers are covered
‚Ä¢ **Consider Needs**: Family health status and usage
‚Ä¢ **Plan Ahead**: Consider future family changes

**üéØ Family Benefits Strategy:**
‚Ä¢ **Medical**: Choose based on family health needs
‚Ä¢ **Dental**: Consider children's dental needs
‚Ä¢ **Vision**: Annual eye exams for all family members
‚Ä¢ **Voluntary**: Life insurance for family protection

Would you like me to help you choose the best family plan or calculate the total cost for your family?`;
  }

  // Add more specific patterns
  if (lowerMessage.includes('dental') || lowerMessage.includes('life insurance')) {
    return `Great question about ${lowerMessage.includes('dental') ? 'dental' : lowerMessage.includes('vision') ? 'vision' : 'life insurance'} coverage! 

These are often overlooked but super important parts of your benefits package. Let me break down what you typically get:

**Dental Coverage:**
‚Ä¢ Preventive care (cleanings, exams) - usually 100% covered
‚Ä¢ Basic procedures (fillings, extractions) - typically 80% coverage
‚Ä¢ Major procedures (crowns, bridges) - usually 50% coverage
‚Ä¢ Annual maximum: $1,000-$2,000

**Vision Coverage:**
‚Ä¢ Annual eye exams - usually covered
‚Ä¢ Frames and lenses - typically $150-$200 allowance
‚Ä¢ Contact lenses - often covered with allowance
‚Ä¢ LASIK discounts - usually 15-20% off

**Life Insurance:**
‚Ä¢ Basic coverage - often 1x your salary
‚Ä¢ Supplemental coverage - additional coverage you can buy
‚Ä¢ Spouse/child coverage - usually available
‚Ä¢ Beneficiary designation - make sure it's updated!

What specific aspect would you like to know more about?`;
  }

  if (lowerMessage.includes('fsa') || lowerMessage.includes('flexible spending')) {
    return `FSAs are fantastic for healthcare savings! Let me explain how they work:

**Flexible Spending Account (FSA):**
‚Ä¢ Pre-tax contributions (saves you money on taxes!)
‚Ä¢ Use it or lose it (spend by March 15th of next year)
‚Ä¢ 2024 limit: $3,200 per year
‚Ä¢ Covers medical expenses, prescriptions, dental, vision

**Key differences from HSA:**
‚Ä¢ FSA: Use it or lose it, no investment options
‚Ä¢ HSA: Keep forever, can invest, triple tax advantage
‚Ä¢ You can't have both FSA and HSA (unless limited FSA)

**Smart FSA strategy:**
‚Ä¢ Estimate your annual medical expenses
‚Ä¢ Contribute slightly less to avoid forfeiture
‚Ä¢ Use for predictable expenses (prescriptions, contacts, etc.)

Would you like help calculating your optimal FSA contribution?`;
  }

  // Default response for other questions
  return `Hi there! I'm your AmeriVet Benefits AI Assistant. I can help you with:

üéØ **Plan Comparison** - Compare health, dental, and vision plans
üí∞ **Cost Calculator** - Calculate total annual costs and savings  
üìä **Benefits Dashboard** - View your current enrollment and usage
üè• **HSA/FSA Info** - Learn about tax-advantaged accounts
üìö **Document Analysis** - Upload and analyze your benefits documents
‚ùì **General Questions** - Get answers about coverage, claims, and more

This is a demo version, so I'm showing you the interface and capabilities. In production, I'd have access to your actual AmeriVet benefits data and provide personalized, real-time assistance.

What would you like to explore first?`;
}

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { message } = chatRequestSchema.parse(body);

    if (!message) {
      return NextResponse.json({ error: 'Message is required' }, { status: 400 });
    }

    // Simulate processing delay
    await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));

    // Generate demo response based on message content
    const response = getDemoResponse(message);

    return NextResponse.json({
      message: {
        id: crypto.randomUUID(),
        role: 'assistant',
        content: response,
        timestamp: new Date()
      },
      conversationId: crypto.randomUUID(),
      usage: { totalTokens: 0, promptTokens: 0, completionTokens: 0 }
    });

  } catch (error) {
    console.error('Demo chat error:', error);
    
    if (error instanceof z.ZodError) {
      return NextResponse.json(
        { error: 'Invalid request data', details: error.errors },
        { status: 400 }
      );
    }

    return NextResponse.json({ 
      error: 'Demo chat processing failed',
      message: 'Sorry, I encountered an error. This is demo mode - the full AI integration will be available in production.'
    }, { status: 500 });
  }
}